<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <textarea id="convert_text"></textarea>
        <button id="sp">voice to text</button>
        <script>
            
            sp.addEventListener('click',function(){
            var speech = true;
            window.speechRecognition = window.webkitSpeechRecognition;
            const recognition = new speechRecognition();

            recognition.interimResults = true;
            let transcript_arr;
            recognition.addEventListener('result',async e => {
                const transcript = Array.from(e.results)
                    .map(result => result[0])
                    .map(result => result.transcript);
                    transcript_arr = await transcript;
                    console.log("tr -> ",transcript);
                    console.log("trns -> ",transcript_arr);
                    // console.log("---------------");
                    // console.log(transcript_arr);
                convert_text.innerHTML =  transcript;
            })
            // console.log('-------');
            console.log("transcript -> ",transcript_arr);
            // console.log('hello')
            

            if(speech==true){
                recognition.start();
            }
        })
        </script>
    </div>
</body>
</html>